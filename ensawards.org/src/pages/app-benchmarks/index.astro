---
import { Image } from "astro:assets";
import type {ImageMetadata} from "astro";
import SuggestFormOpener from "../../components/atoms/SuggestFormOpener.astro";
import ThirdPlaceIcon from "../../assets/thirdPlaceAward.svg";
import SecondPlaceIcon from "../../assets/secondPlaceAward.svg";
import FirstPlaceIcon from "../../assets/firstPlaceAward.svg";
import AppLeaderboardCard from "../../components/atoms/cards/AppLeaderboardCard.astro";
import ItemsList from "../../components/molecules/ItemsList.astro";
import SubpageHero from "../../components/molecules/SubpageHero.astro";
import { appsData } from "../../data/appData";
import Layout from "../../layouts/Layout.astro";
import {adaptToLink} from "../../utils";

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/*.{jpeg,jpg,png,gif,svg}");
const placeIcons = ["/src/assets/firstPlaceAward.svg", "/src/assets/secondPlaceAward.svg","/src/assets/thirdPlaceAward.svg"]
---

<Layout>
  <SubpageHero header="App benchmarks" />
  <section
    class="w-full box-border h-fit flex flex-col flex-nowrap justify-start items-center gap-10 p-5 sm:py-[60px] sm:px-8">
    <ItemsList header="Benchmarks" containerStyles="gap-3 sm:gap-3">
      {
        appsData.map((app, idx) => (
            <AppLeaderboardCard
                key={`app-review-card-${adaptToLink(app.name)}`}
                name={app.name}
                ensAwardsScore={app.ensAwardsScore}
                type={app.type}
                viewBenchmarksLink={`/app-benchmarks/${adaptToLink(app.name)}`}>
              <Image src={images[app.iconSourceLink]()} alt={`${app.id}`} slot="appIcon" class="rounded-md" />
              {idx < 3 ? (<Image alt={`${idx+1}-place`} src={images[placeIcons[idx]]()} slot="placeIcon" />) : <p slot="placeIcon" class="w-8 pt-[7px] px-[11px] pb-[5px] text-sm leading-normal font-semibold text-muted-foreground">{idx+1}</p>}
            </AppLeaderboardCard>
        ))
      }
      <SuggestFormOpener whatsSuggested="app" suggestionStyle="outline" />
    </ItemsList>
  </section>
</Layout>
